<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
    <head>
        <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
        <meta name="author" content="SCAinteractive" />
        <title>SCAi PrizeSDK</title>

    </head>
    <body>
        <h1>SCAi PrizeSDK</h1>
        <div id="bodycontent">
            <h2>About the SDK</h2>
            <p>SCAi PrizeSDK can facilitate adding sweepstakes or instant win functionality to a new or existing web application. By integrating the SDK in to your user system, you can give your users the opportunity to win prizes though SCAi's game engine. SCAi's game engine can manage the business rules, such as plays per day, per user and maximum plays for a promotion.
            </p>
            <p>More marketing language here...</p>
            <h2>Configuration</h2>
            <p>Your sales representative with provide you with the following values:</p>
            <ul>
                <li>contest_adminID (your IP or hostname, eg.) $_SERVER['SERVER_NAME']) </li>
                <li>client</li>
                <li>promo</li>
                <li>authkey</li>
                <li>ttl_seconds (optional)</li>
                <li>lang (optional - defaults to en_us)</li>
            </ul>
            <p>Set these values in your configuration array, and initialize the class object with the config array. In the case of a configuration error, an exception is thrown.</p>
            <p>Change permissions the folder 'includes/sitecfgs' to be globally read + write + executable (chmod 777 includes/sitecfgs). The configuration variables for your promotion will be stored locally in this directory. The files will be named using your client and promotion values, as such: cfg_$params['client']_$params['promo'].php. You may delete the file to get a new configuration for the promotion. </p>
            <p>Also, although it is highly unlikely that the configuration for a game will change while your promotion is running, you may set the ttl_seconds parameter to poll for changes in the configuration on your specified interval. Please be aware that the request to fetch the configuration may cause your script to load slower than usual due to the time it takes to get the configuration. It is not recommended that the ttl value be set for less than one hour (3600).</p>

            <h2>Demo Configurations</h2>
            <ul>
                <li>sweeps:<br />
                    <code><pre>
                        $config = array(
                            'contest_adminID' => $_SERVER['SERVER_NAME'],
                            'client' => 'demosdk',
                            'promo' => 'sweeps',
                            'authkey' => 'DEMO-SDK1-1234-5678'
                        );</pre>
                    </code></li>
                <li>instant win (one level):<br />
                    <code><pre>
                        $config = array(
                            'contest_adminID' => $_SERVER['SERVER_NAME'],
                            'client' => 'demosdk',
                            'promo' => 'instant',
                            'authkey' => 'DEMO-SDK1-1234-5678'
                        );</pre>
                    </code></li>
                <li>instant win (multi level):<br />
                    <code><pre>
                        $config = array(
                            'contest_adminID' => $_SERVER['SERVER_NAME'],
                            'client' => 'demosdk',
                            'promo' => 'instantmulti',
                            'authkey' => 'DEMO-SDK1-1234-5678'
                        );</pre>
                    </code></li>
            </ul>


            <h2>Examples</h2>
            <p>All four examples use one of the three configs above, and generate a fake username which is stored as a session cookie.</p>
            <ul>
                <li><a href="examples/ExampleSweeps.php">Sweeps Entry Game (demosdk-sweeps)</a></li>
                <li><a href="examples/ExampleInstantWin.php">Instant Win Game with One Winning Level (demosdk-instant)</a></li>
                <li><a href="examples/ExampleInstantWinMulti.php">Instant Win Game with Six Winning Levels (demosdk-instantmulti)</a></li>
                <li><a href="examples/ExampleProfileUpdateAndHistory.php">Updating a User's Profile and Fetching Game History (demosdk-instantmulti)</a></li>


            </ul>
            <h2>Required User Data</h2>
            <p>At a minimum, the SDK requires a username. Depending on your own user system, the business rules of the promotion and the rules required by the prizing contest, you may be required to provide more than a username. The SDK is meant to integrate with a user on your own system. This value must maintain consistency throughout the promotions. If you do not use a login or screen name or your login name does not comply with our system rules (under 25 chars and alphanumeric: 'a-z' '0-9' '-' and '_') or you allow users to change their screen name, you may use your userID as a username or the database index of the user's record. If your promotion does not require business rules regarding plays per user, you may use microtime or another sufficiently unique value for each play.</p>

            <p>Please create your own test users to use with the examples provided. If you are not ready to integrate your user system in the provided examples, a good method is to use your client name and a number joined with an underscore, eg.) scai_1328923489. An example of a username for testing follows and is provided in each included example.</p>

            <p>
                <code><pre>
                    if (!isset($_COOKIE['username'])) {

                        //Create a fake username using my client name and the microtime
                        $username = 'scaitester_'.(microtime(true)*10000);

                        //set it as a session cookie so I can see what it looks like for returning visitors
                        setcookie('username',$username);

                    } else {

                        //if a cookie already exists, get the fake username from the cookie
                        $username = $_COOKIE['username'];

                    }</pre>
                </code>
            </p>
             <p>For the demos, one username, 'demo_infinite_plays' is permitted infinite plays. If you wish to test using this username, be aware, it does not behave like a regular user, and will not be restricted by the rules regarding plays per day. You should test with the user scheme you intend to use in your application.</p>
            <p>The user data is shared between any promotions at a 'client' level, so any users you create and set the profile of, in demosdk-instant will have the same profile data in demosdk-sweeps. When you are ready for your promotion(s) to be set up, we will give you a new 'client' ID and none of the test users will exist in that configuration. </p>
            <p><h4>User fields, types and lengths</h4>
                <ul>
                    <li>[username] [varchar](25) NOT NULL,</li>
                    <li>[firstname] [varchar](25) NULL,</li>
                    <li>[lastname] [varchar](25) NULL,</li>
                    <li>[address] [varchar](50) NULL,</li>
                    <li>[address2] [varchar](50) NULL,</li>
                    <li>[city] [varchar](30) NULL,</li>
                    <li>[state] [varchar](25) NULL,</li>
                    <li>[country] [varchar](30) NULL,</li>
                    <li>[zip] [varchar](12) NULL,</li>
                    <li>[birthdate] [smalldatetime] NULL,</li>
                    <li>[gender] [varchar](1) NULL,</li>
                    <li>[title] [varchar](100) NULL,</li>
                    <li>[company] [varchar](80) NULL,</li>
                    <li>[day_phone] [varchar](20) NULL,</li>
                    <li>[evening_phone] [varchar](20) NULL,</li>
                    <li>[fax_phone] [varchar](20) NULL,</li>
                    <li>[mobile_email] [varchar](75) NULL,</li>
                    <li>[alt_email] [varchar](75) NULL,</li>
                    <li>[answer1] [varchar](50) NULL,</li>
                    <li>[answer2] [varchar](50) NULL,</li>
                    <li>[answer3] [varchar](50) NULL,</li>
                    <li>[answer4] [varchar](50) NULL,</li>
                    <li>[answer5] [varchar](50) NULL,</li>
                    <li>[answer6] [varchar](50) NULL,</li>
                    <li>[answer7] [varchar](50) NULL,</li>
                    <li>[answer8] [varchar](50) NULL,</li>
                    <li>[answer9] [varchar](50) NULL,</li>
                    <li>[answer10] [varchar](50) NULL,</li>
                </ul>
            </p>
            <h2>PrizeSDK Functions</h2>
            <h4>Class Constructor</h4>
            <ul>
                <li><b>new PrizeSDK </b><br/>
                    Creates a new SDK object.<br />
                    <ul>
                        <li>usage: $PrizeSDK = new peSDK($config);</li>
                        <li>params: an array containing the configuration values</li>
                        <li>returns: [object] a PrizeSDK class object</li>
                        <li>errors: throws an exception </li>
                    </ul>
                </li>

            </ul>
            <h4>Configuration Data</h4>
            <ul>
                <li><b>isOpen </b><br/>
                    Checks whether or not the contest is open.<br />
                    <ul>
                        <li>usage: $PrizeSDK->isOpen();</li>
                        <!--<li>params:</li>-->
                        <li>returns: [boolean] true if contest is currently open. false for closed.</li>
                        <!--<li>errors:</li>-->
                    </ul>
                </li>

                <li><b>getRequiredFields</b><br/>
                    Get the required fields from the configuration values .<br />
                    <ul>
                        <li>usage: $PrizeSDK->getRequiredFields();</li>
                        <!--<li>params:</li>-->
                        <li>returns: [array] list of required fields</li>
                        <li>errors: No errors, returns empty array </li>
                    </ul>
                </li>

                <li><b>getAllFields</b><br/>
                    Get all possible profile fields from the configuration values .<br />
                    <ul>
                        <li>usage: $PrizeSDK->getAllFields();</li>
                        <!--<li>params:</li>-->
                        <li>returns: [array] list of all fields available</li>
                        <li>errors: No errors, array would be empty </li>
                    </ul>
                </li>

                <li><b>getPrizingInfo</b><br/>
                    Gets the number of prize levels and the minimum and maximum level.<br />
                    <ul>
                        <li>usage: $PrizeSDK->getPrizingInfo();</li>
                        <!--<li>params:</li>-->
                        <li>returns: [array] list including number of prize levels and the min and max.</li>
                        <li>errors: Array would be empty, and error would be sent to error stack</li>
                    </ul>
                </li>
            </ul>

            <h4>Errors</h4>

            <ul>
                <li><b>newError </b><br/>
                    Adds an Error to the Error Stack.<br />
                    <ul>
                        <li>usage: $PrizeSDK->newError($e, $code);</li>
                        <li>params: $e (error flag as defined in Error Class), $code (one of 5 possible error levels)</li>
                        <!--<li>returns: void</li>-->
                        <!--<li>errors: nothing </li>-->
                    </ul>
                </li>
                <li><b>hasErrors </b><br/>
                    Indicates if any errors are in the error stack.<br />
                    <ul>
                        <li>usage: $PrizeSDK->hasErrors();</li>
                        <!--<li>params:</li>-->
                        <li>returns: [boolean] true if errors are on stack</li>
                        <!--<li>errors: nothing </li>-->
                    </ul>
                </li>
                <li><b>getLastError </b><br/>
                    Gets the last error on the error stack.<br />
                    <ul>
                        <li>usage: $PrizeSDK->getLastError();</li>
                        <li>params: $lang (optional), will use previously set default config lanugage if not provided.</li>
                        <li>returns: [string] Most recent error from stack</li>
                        <!--<li>errors: nothing </li>-->
                    </ul>
                </li>
                <li><b>getAllErrors </b><br/>
                    Gets an arry of all errors on the error stack.<br />
                    <ul>
                        <li>usage: $PrizeSDK->getAllErrors;</li>
                        <li>params: $lang (optional), will use previously set default config lanugage if not provided.</li>
                        <li>returns: [array] Array of error strong with the most recent error as the first item arr[0]</li>
                        <!--<li>errors: nothing </li>-->
                    </ul>
                </li>
                <li><b>flushErrors </b><br/>
                    Flushes the error stack. All errors are deleted.<br />
                    <ul>
                        <li>usage: $PrizeSDK->flushErrors();</li>
                        <!--<li>params:</li>-->
                        <li>returns: [array] Empty array</li>
                        <!--<li>errors: nothing </li>-->
                    </ul>
                </li>
            </ul>
            <h4>User Profile Functions</h4>
            <p>For any of the following functions which require the user parameters, you may leave the parameters blank if the user information is already in place. Only the first call requiring the user's information requires the user parameters. User parameters are key/value pairs.</p>
            <ul>
                <li><b>isAuthenticated </b><br/>
                    Check if a user has been authenticated by the server.<br />
                    <ul>
                        <li>usage: $PrizeSDK->isAuthenticated</li>
                        <!--<li>params: none </li>-->
                        <li>returns: [boolean] true if a user is authenticated</li>
                        <!--<li>errors: </li>-->
                    </ul>
                </li>

                <li><b>setUserParams </b><br/>
                    Sets the user paramater array, but does not check the values.<br />
                    <ul>
                        <li>usage: $PrizeSDK->setUserParams($user_parameters); </li>
                        <li>params: set the user parameter array  </li>
                        <!--<li>returns: </li>-->
                       <!-- <li>errors: </li>-->
                    </ul>
                </li>

                <li><b>authenticateOnServer </b><br/>
                    Authenticates the user on the server<br />
                    <ul>
                        <li>usage: $PrizeSDK->authenticateOnServer ($user_parameters);</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns:[boolean] true if user is sucessfully authenticated  </li>
                        <li>errors: Error would be sent to error stack</li>
                    </ul>
                </li>
                <li><b>getCurrentProfileParams </b><br/>
                    Returns the current parameters in the user's profile as key value pairs<br />
                    <ul>
                        <li>usage: $PrizeSDK->getCurrentProfileParams ()</li>
                        <!--<li>params: none </li>-->
                        <li>returns: [array] keys and values currently set in the user's profiles</li>
                        <li>errors: Array would be empty, and error would be sent to error stack</li>
                    </ul>
                </li>
                <li><b>getUserProfile </b><br/>
                    Returns the current user profile object with all possible profile fields and their current values<br />
                    <ul>
                        <li>usage: $PrizeSDK->getUserProfile ()</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: [array] fields after server update, each field with name, value, and is_required</li>
                        <li>errors: Array would be empty, and error would be sent to error stack</li>
                    </ul>
                </li>

                <li><b>setUserProfile </b><br/>
                    Updates or sets the User Profile on the server.<br />
                    <ul>
                        <li>usage: $PrizeSDK->setUserProfile ($user_parameters)</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: [array] fields after server update, each field with name, value, and is_required</li>
                        <li>errors: Array would be empty, and error would be sent to error stack</li>
                    </ul>
                </li>

            </ul>

            <h4>Entries and Plays Functions</h4>
            <ul>
                <li><b>canEnter </b><br/>
                    Checks to see if the user is currently permitted to play / enter (use either canEnter or nextPlay - not both)<br />
                    <ul>
                        <li>usage: $PrizeSDK->canPlay ($user_parameters)</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: [boolean] returns true if the user is allowed to play</li>
                        <li>errors: null value, and error would be sent to error stack</li>
                    </ul>
                </li>
                <li><b>nextPlay </b><br/>
                    Checks when the user can play next. (use either canEnter or nextPlay - not both) <br />
                    <ul>
                        <li>usage: $PrizeSDK->nextPlay ($user_parameters)</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: Formatted date of when a user can play next. '0' in the case that a user can play now.</li>
                        <li>errors: null value, and error would be sent to error stack</li>
                    </ul>
                </li>
                <li><b>enterSweeps </b><br/>
                    Enter the sweepstakes<br />
                    <ul>
                        <li>usage: $PrizeSDK->enterSweeps ($user_parameters)</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: [array] A game object array containing gameID, result_text and other values</li>
                        <li>errors: Array would be empty and error would be sent to error stack</li>
                    </ul>
                </li>
                <li><b>enterInstantWin </b><br/>
                    Enter instant win<br />
                    <ul>
                        <li>usage: $PrizeSDK->enterInstantWin ($user_parameters)</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: [array] A game object array containing gameID, result_text and other values</li>
                        <li>errors: Array would be empty and error would be sent to error stack</li>
                    </ul>
                </li>
                <li><b>getUserHistory </b><br/>
                    Get previously played games from this user.<br />
                    <ul>
                        <li>usage: $PrizeSDK->getHistory($user_parameters)</li>
                        <li>params: if not already set, a user parameter array containing at minimum, all required fields </li>
                        <li>returns: [array] An array of game object arrays containing gameID, result_text and other values</li>
                        <li>errors: Array would be empty and error would be sent to error stack</li>
                    </ul>
                </li>

            </ul>
            <h2>Other Classes</h2>
            <ul>
                <li>includes/peRequest: handles communication to and from server via cURL</li>
                <li>includes/peClient: wrapper for request model. Formats data for the request to the server.</li>
                <li>includes/peConfig: fetches, caches and evaluates configuration variables for a promotion.</li>
                <li>includes/peError: manages error levels and exceptions.</li>

            </ul>
            <h2>Language Files</h2>
            <p>Multilingual games can be done using the language files in the following format.
            <ul>
                <li>includes/lang: nls.(encoding_language).php</li>

            </ul>
        </div>
    </body>
</html>